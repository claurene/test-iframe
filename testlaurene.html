<!DOCTYPE html>
<html>
<body>

<h2>Test Laurene</h2>

<label>event id :</label><input type="text" id="event-id" value="METZ-BOURG"></input>

<label>basket id :</label><input type="text" id="basket-id" value="BK00001"></input>

<ul>
  <li><input type="checkbox" id="B1-A1"></input>B1-A1</li>
  <li><input type="checkbox" id="B2-A1"></input>B2-A1</li>
  <li><input type="checkbox" id="B3-A1"></input>B3-A1</li>
  <li><input type="checkbox" id="B4-A1"></input>B4-A1</li>
  <li><input type="checkbox" id="B5-A1"></input>B5-A1</li>
</ul>

<button id="btn-valid-selection">Valider</button>

<p id="demo"></p>

<script>
// Le code est tr√®s moche mais c'est pour un test rapide
const element = document.getElementById("btn-valid-selection");
element.addEventListener("click", function() {

  var eventid = document.getElementById("event-id").value;
  var basketid = document.getElementById("basket-id").value;

  var json = '[';

  if (document.getElementById("B1-A1").checked) {
    if (json != '[') {
      json += ',';
    }
    json += '{"event_code":"'+eventid+'",  \
    "basket_code":"'+basketid+'", \
    "seat_code":"B1-A1", \
    "rate_code":"NORMAL"}'
  };
  if (document.getElementById("B2-A1").checked) {
    if (json != '[') {
      json += ',';
    }
    json += '{"event_code":"'+eventid+'",  \
    "basket_code":"'+basketid+'", \
    "seat_code":"B2-A1", \
    "rate_code":"NORMAL"}'
  };
  if (document.getElementById("B3-A1").checked) {
    if (json != '[') {
      json += ',';
    }
    json += '{"event_code":"'+eventid+'",  \
    "basket_code":"'+basketid+'", \
    "seat_code":"B3-A1", \
    "rate_code":"NORMAL"}'
  };
  if (document.getElementById("B4-A1").checked) {
    if (json != '[') {
      json += ',';
    }
    json += '{"event_code":"'+eventid+'",  \
    "basket_code":"'+basketid+'", \
    "seat_code":"B4-A1", \
    "rate_code":"NORMAL"}'
  };
  if (document.getElementById("B5-A1").checked) {
    if (json != '[') {
      json += ',';
    }
    json += '{"event_code":"'+eventid+'",  \
    "basket_code":"'+basketid+'", \
    "seat_code":"B5-A1", \
    "rate_code":"NORMAL"}'
  };

  json += ']';

  window.parent.postMessage(json, '*');
});

</script> 

</body>
</html>

